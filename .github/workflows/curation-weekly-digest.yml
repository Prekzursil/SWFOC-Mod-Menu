name: Curation Weekly Digest

on:
  workflow_dispatch:
  schedule:
    - cron: '45 6 * * 1'

permissions:
  contents: read
  issues: write

jobs:
  digest:
    runs-on: ubuntu-latest
    steps:
      - name: Publish curation digest issue
        uses: actions/github-script@v7
        with:
          script: |
            const owner = context.repo.owner;
            const repo = context.repo.repo;
            const title = `Runtime safety digest - ${new Date().toISOString().slice(0, 10)}`;
            const body = [
              "## Focus",
              "- runtime reliability, repro-bundle integrity, policy drift",
              "",
              "## Findings",
              "- Add top regressions and quality risks discovered this week.",
              "",
              "## Suggested actions",
              "- Open targeted follow-up issues for non-trivial fixes.",
              "- Keep direct code mutation out of the digest workflow.",
            ].join("\n");

            await github.rest.issues.create({
              owner,
              repo,
              title,
              body,
              labels: ["area:docs", "risk:low"],
            });
